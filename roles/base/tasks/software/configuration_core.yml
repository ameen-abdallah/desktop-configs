  - name: System setup | core packages | install hyprland packages and dependencies
    tags: hyprland
    ansible.builtin.package:
      name:
        - hyprland
        - xdg-desktop-portal-hyprland
        - qt5-wayland
        - qt6-wayland
        - dunst
      state: latest

  - name: System configuration | core packages | copy hyprland config files
    tags: copy hyprland.conf
    ansible.builtin.copy:
      src: /usr/share/hypr/hyprland.conf
      dest: "{{ ansible_env.HOME }}/.config/hypr/hyprland.conf"

  - name: System configuration | core packages | configuration files
    tags: hyprland
    ansible.builtin.lineinfile:
        dest: "{{ ansible_env.HOME }}/.config/hypr/hyprland.conf"
        regexp: "^#?autogenerated"
        state: absent
    when: ansible_distribution == "Archlinux"
